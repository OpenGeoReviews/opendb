<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <script src="admin/js/jquery.json-editor.min.js"></script>
    <script src="admin/js/deepdiffmapper.js"></script>
    <script src="admin/js/admin.js"></script>
    <script src="admin/js/blocks-ops-objs-view.js"></script>
    <script src="admin/js/api-view.js"></script>
    <script src="admin/js/settings-metrics-ipfs-view.js"></script>
    <style>
        body {
            padding: 40px;
        }
    
        li {
            list-style-type: none;
        }
    
        .popover {
            word-break: break-all;
        }
    
        .resize-vertical {
            resize: vertical;
        }
    
        .no-margin {
            margin: 0;
        }
    
        .no-border {
            border: 0;
        }
    
        span {
            word-break: break-all;
        }
    
        /* TODO remove custom classes */
        .btn-file {
            position: relative;
            overflow: hidden;
        }
        .btn-file input[type=file] {
            position: absolute;
            top: 0;
            right: 0;
            min-width: 100%;
            min-height: 100%;
            font-size: 100px;
            text-align: right;
            filter: alpha(opacity=0);
            opacity: 0;
            outline: none;
            background: white;
            cursor: inherit;
            display: block;
        }

        #img-upload {
            width: 100%;
        }

        .pre-scroll {
            width: 100%;
            height: auto;
            max-height: 50%;
            overflow: auto;
            background-color: #eeeeee;
            word-break: break-all;
            word-wrap: break-word;
            white-space: pre-wrap;
        }

        .table_wrapper {
            display: block;
            overflow-x: auto;
            white-space: nowrap;
        }

        .large-modal {
            width: 90%;
        }

        .radio-btn span.glyphicon {
            opacity: 0;
        }
        .radio-btn.active span.glyphicon {
            opacity: 1;
        }

        .inherit {
            width: inherit;
        }

        .table_layout_fixed_with {
            table-layout: fixed;
            width: 250px;
        }

        .table_layout_200 {
            table-layout: fixed;
            min-width: 200px;
        }

        .pre_max_height_half_screen {
            max-height: 50vh;
        }


    </style>
</head>

<body>
<div class="alert alert-dismissible fade in" hidden id="alert-template">
    <a href="#" class="close" aria-label="close" onclick="hideAlert()">&times;</a>
    <strong id="alert-status"></strong><span id="result"></span>
</div>
<ul class="nav nav-tabs" id="tabspanel">
    <li class="active"><a data-toggle="tab" href="#home" id="home-tab">Status</a></li>
    <li><a data-toggle="tab" href="#blocks" id="blocks-tab">Blocks</a></li>
    <li><a data-toggle="tab" href="#operations" id="operations-tab">Operations</a></li>
    <li><a data-toggle="tab" href="#objects" id="objects-tab">Objects</a></li>
    <li><a data-toggle="tab" href="#api" id="api-tab">API</a></li>
    <li><a data-toggle="tab" href="#errors" id="errors-tab">Errors</a></li>
    <li><a data-toggle="tab" href="#bots" id="bots-tab">Bots</a></li>
    <li><a data-toggle="tab" href="#settings" id="settings-tab">Settings</a></li>
    <li><a data-toggle="tab" href="#metrics" id="metrics-tab">Metrics</a></li>
    <li><a data-toggle="tab" href="#ipfs" id="ipfs-tab">IPFS</a></li>
    <li><a data-toggle="tab" href="#reg" id="reg-tab">Users</a></li>
</ul>
<div class="tab-content">
    <div id="home" class="tab-pane fade in active">
        <h3>Admin harness for OpenDB</h3>
        <div class="form-group form-inline">
        
            <button class="btn btn-primary form-control" id="refresh-admin-btn"><span
                    class="glyphicon glyphicon-refresh"></span> Refresh</button>
        </div>
        
        <div class="form-group">
            <p>Blockchain status: <b><span id="blockchain-status"></span><span id="status-description"></span></b></p>
            <p>Admin server user: <b><span id="admin-user"></span></b></p>
            <p>Admin logged in user: <b><span id="admin-login-user">not logged in</span></b></p>
            <p>Superblocks: <ol class="breadcrumb" id="blockchain-blocks"></ol></p>
            <p id="blockchain-orphaned-blocks-header">Orphaned blocks: <b><span id="blockchain-orphaned-blocks"></span></b></p>
		</div>
        <div id="admin-login-div">
            <div class="form-inline">
                <label for="admin-login-name">Login:</label>
                <input type="text" class="form-control" id="admin-login-name"/>
                <label for="admin-login-key">Key:</label>
                <input type="password" class="form-control" id="admin-login-key"/>
                <input type="button" class="btn btn-primary" value="Login as admin" id="admin-login-btn"/>
            </div>
        </div>
        <div id="admin-actions" >
        	<div class="panel panel-success">
        		<div class="panel-heading"><b>Block actions</b></div>
        		<div class="panel-body">
            		<div class="form-inline">
            			<input type="button" class="btn btn-primary form-control" value="Create block" id="block-create-btn"/>
            			<input type="button" class="btn btn-primary form-control" value="Replicate blocks" id="replicate-btn" />
            			<input type="button" class="btn btn-primary form-control" value="Compact superblocks" id="compact-btn" />
            		</div>
            	</div>
            </div>
            <div class="panel panel-success">
        		<div class="panel-heading"><b>Blockchain actions</b></div>
        		<div class="panel-body">
            		<div class="form-inline">
            			<input type="button" class="btn btn-primary form-control" value="Clear log" id="clear-log-btn" />
            			<input type="button" class="btn btn-primary form-control" value="Lock/unlock blockchain" id="ops-pause-btn"/>
            			<input type="button" class="btn btn-primary form-control" value="Pause/start new blocks" id="blocks-pause-btn"/>
            			<input type="button" class="btn btn-primary form-control" value="Pause/start replication" id="replicate-pause-btn"/>
            		</div>
            	</div>
            </div>
        </div>
        <div id="owner-actions">
        	<div class="panel panel-warning">
        		<div class="panel-heading"><b>Management actions</b></div>
        		<div class="panel-body">
            		<div class="form-inline">
            			<input type="button" class="btn btn-primary form-control" value="Bootstrap" id="block-bootstrap-btn"/>
                		<input type="button" class="btn btn-primary form-control" value="Revert super block" id="block-revert-btn"/>
                		<input type="button" class="btn btn-primary form-control" value="Revert 1 block" id="block-1revert-btn"/>
            		</div>
            	</div>
            </div>
        	<div class="panel panel-warning">
        		<div class="panel-heading"><b>Delete actions</b></div>
        		<div class="panel-body">
            		<div class="form-inline">
            			<input type="button" class="btn btn-primary form-control" value="Clear queue" id="clear-list-btn" />
            			<input type="text" class="form-control" id="remove-orphaned-blocks-txt"/>
            			<input type="button" class="btn btn-primary" value="Remove orphaned blocks" id="remove-orphaned-blocks-btn"/>
            			<input type="text" class="form-control" id="remove-queue-ops-txt"/>
            			<input type="button" class="btn btn-primary" value="Remove queue operations" id="remove-queue-ops-btn"/>
            		</div>
            	</div>
            </div>
        </div>
    </div>

    <!--BLOCKS TAB-->
    <div id="blocks" class="tab-pane fade">
        <h3>Blocks</h3>
        <div class="row">
        	<div class="form-group col-md-4">
            	<select id="blocks-search" class="form-control" >
					<option selected value="all">All</option>
					<option value="from">From</option>
					<option value="to">To</option>
            	</select>
            </div>
            <div class="form-group form-inline col-md-8">
            	<div class="form-group hidden" id="block-from-fields">
            		<label for="search-block-field" class="control-label">Block:</label>
                	<input type="text" id="search-block-field" class="form-control" placeholder="Block hash" aria-label="Block hash">
                </div>
                <div class="form-group">
	           		<label for="block-limit-value" class="control-label">Limit:</label>
               		<input type="text" id="block-limit-value" class="form-control" placeholder="# of blocks" aria-label="Number of blocks">
            	</div>
            </div>
        </div>
        <div class="row">
        	<div class="col-md-2 form-group">
        		<input type="submit" class="btn btn-primary form-control" id="block-load-btn" value="Load">
        	</div>
        </div>

        <ul class="list-group" id="blocks-list"></ul>

        <ul class="list-group" hidden="true">
        	<li class="panel panel-default" id="blocks-list-item">
        		<p class="panel-heading">
        			<b><a did="block-operation-link" href="#" onclick="">Block #<span did="block-id"></span></a></b>
        			<a href="#popover" class="pull-right" did="block-hash" data-placement="left" data-toggle="popover"></a>
        		</p>
        		<div class="panel-body">
                    <p>Date: <b><span did="block-date"></span></b></p>
                    <p class="pull-right">Signed by: <b><span did="signed-by"> </span></b></p>
                    <p><span did="block-objects-info"></span></p>
                    <details><summary><b>More</b></summary>
                        <pre>
Previous block hash: <b><span did="prev-block-hash"></span></b>
Superblock: <b><span did="superblock"></span></b>
Operations: <b><span did="op-count"></span></b>
Added/Edited/Removed objects: <b><span did="block-objects"></span></b>
Block size: <b><span did="block-size"></span></b>
Merkle tree hash: <b><span did="merkle-tree"></span></b>
Details: <b><span did="block-details"></span></b></pre>
                    </details>
                    <details><summary><b>Raw json</b></summary><pre did="block-json"></pre></details>
        		</div>
        	</li>
        </ul>
    </div>
    <!--BLOCKS TAB-->

    <!--OPERATION TAB-->
    <div id="operations" class="tab-pane fade">
        <h3>Operations</h3>
        <div class="row">
            <div class="form-group col-md-4">
                <select id="operations-search" class="form-control">
                    <option selected value="queue">Queue</option>
                    <option value="id">by Operation</option>
                    <option value="blockId">by Block Id</option>
                    <option value="blockHash">by Block Hash</option>
                </select>
            </div>
            <div class="form-group form-inline col-md-8 hidden" id="operations-search-fields">
                <div class="form-group">
                    <label id="input-search-operation-key" for="operations-key" class="control-label">Input</label>
                    <input type="text" id="operations-key" class="form-control">
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-2 form-group">
                <input type="submit" id="operations-search-btn" value="Load" class="btn btn-primary form-control">
            </div>
        </div>
        <label id="amount-operations" class="col-form-label hidden"></label>

        <ul class="list-group" id="operations-list"></ul>

        <ul class="list-group" hidden="true">
            <li class="panel panel-default" id="operation-list-item">
                <p class="panel-heading">
                    <a href="#" class="pull-right" did="op-hash"></a>
                    <a href="#" did="op-type-link">Operation type: <b><span did="op-type"></span></b></a>
                </p>
                <div class="panel-body">
                    <p class="pull-right">Signed by: <b><span did="signed-by"></span></b></p>
                    <p>Objects: <span did="object-info"></span></p>
                    <details><summary><b>Raw json</b></summary><pre did="op-json"></pre></details>
                </div>
            </li>
        </ul>
    </div>
    <!--OPERATION TAB-->

    <!--OBJECT TAB-->
    <div id="objects" class="tab-pane fade">
        <h3>Objects</h3>
        <div class="row">
            <div class="form-group form-inline col-md-4">
                <div class="form-group">
                    <label for="browse-list">Browse:</label>
                    <select class="form-control" id="browse-list">
                        <option selected value="type">by type</option>
                        <option value="history">history</option>
                        <option value="operation">by operation</option>
                        <option value="userid">by user id</option>
                    </select>
                </div>
            </div>
        </div>
        
          <div class="row">
            <div class="form-group form-inline col-md-8" id="type-list-select">
                <div class="form-group" >
                    <label for="type-list">Search:</label>
                    <select class="form-control" id="type-list">
                    	<option value="all">all</option>
                    </select>
                </div>
                <div class="form-group">
                    <select class="form-control" id="search-type-list">
                        <option value="all">all</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="form-group form-inline col-md-4 hidden" id="search-key-input">
                <div class="form-group">
                    <label for="search-key" id="name-key-field"></label>
                    <input type="text" id="search-key" class="form-control"/>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="form-group form-inline col-md-8">
                <div class="form-group">
                    <label for="limit-field">Limit:</label>
                    <input type="text" class="form-control" id="limit-field" value="50"/>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-2 form-group">
                <input type="submit" value="Search" id="load-objects-btn" class="btn btn-primary form-control">
            </div>
        </div>

        <label class="col-form-label" id="amount-objects"></label>

        <div class="row">
            <div class="form-group hidden col-md-12" id="json-editor-div">
                <pre id="json-display" class="form-group"></pre>
            </div>
        </div>

        <div class="row">
            <div class="form-group form-inline col-md-4">
                <input type="button" value="Cancel edit" id="stop-edit-btn" class="btn btn-primary hidden">
                <input type="button" value="Commit edit" id="finish-edit-btn" class="btn btn-primary hidden">
                <input type="button" value="Add edit op" id="add-edit-op-btn" class="btn btn-primary hidden">
            </div>
        </div>

        <ul class="list-group" id="objects-list">
        </ul>

        <!--search info-->
        <ul class="list-group" hidden="true">
            <li class="panel panel-default" id="objects-list-item">
                <p class="panel-heading">
                    <a href="#popover" class="pull-right" did="object-op-hash" data-placement="left" data-toggle="popover"></a>
                    <span did="obj-id"></span>
                    <a type="button" did="edit-object" class="btn btn-default btn-xs">Edit</a>
                </p>
                <div class="panel-body">
                    <p did="comment">Comment: <b><span did="obj-comment"></span></b></p>
                    <details><summary><b>Raw json</b></summary><pre did="object-json"></pre></details>
                </div>
            </li>
        </ul>

        <!--history info-->
        <ul class="list-group" hidden="true">
            <li class="panel panel-default" id="objects-history-list-item">
                <div class="panel-heading">
                    <a href="#popover" class="pull-right" did="object-op-hash" data-placement="left" data-toggle="popover"></a>
                    <span did="obj-id"></span>
                </div>
                <div class="panel-body">
                    <p>Date: <b><span did="obj-date"></span></b></p>
                    <!--  <p>Type: <b><span did="obj-type"></span></b></p>  -->
                    <p did="comment-hidden">Comment: <b><span did="obj-comment"></span></b></p>
                    <p did="user-hidden" class="pull-right">User: <b><span did="obj-user"></span></b></p>
                    <p>Change: <b><span did="obj-status"></span></b></p>
                    <details did="object-json-hidden"><summary><b>Obj json</b></summary><pre did="object-json"></pre></details>
                    <details did="delta-json-hidden"><summary><b>Delta json</b></summary><pre did="delta-json"></pre></details>
                </div>
            </li>
        </ul>
    </div>
    <!--OBJECT TAB-->

    <!--LOG TAB-->
    <div id="errors" class="tab-pane fade">
        <h3>Log</h3>
        <div class="form-group form-inline">
            <button class="btn btn-primary form-control" id="refresh-logs-btn"><span class="glyphicon glyphicon-refresh"></span>
                Refresh</button>
        </div>
        <ul class="list-group" id="errors-list"></ul>
        <ul class="list-group" id="errors-list-item" hidden="true">
            <li class="panel panel-default">
                <div class="panel-heading">
                    <span class="pull-right" did="log-time"></span>
                    <span did="status"></span><b><span did="status-text"></span></b>
                </div>
                <div class="panel-body">
                    <span did="log-message"></span>
                    <p did="block-hidden">Block (id, hash): <b><span did="block"></span></b></p>
                    <p did="operation-hidden">Operation: <b><span did="operation"></span></b></p>
                    <details did="obj-json-hidden"><summary><b did="object-name">Object</b></summary><pre did="object-json"></pre></details>
                    <details did="block-json-hidden"><summary><b>Block json</b></summary><pre did="block-json"></pre></details>
                    <details did="op-json-hidden"><summary><b>Operation json</b></summary><pre did="operation-json"></pre></details>
                    <details did="full-json-hidden"><summary><b>Full Exception</b></summary><pre did="full-exception-json"></pre></details>
                </div>
            </li>
        </ul>
    </div>
    <!--LOG TAB-->

    <!--API TAB-->
    <div id="api" class="tab-pane fade">
            <!--API state-->
            <h3>Public API</h3>
            <div class="form-group form-inline">
                <button class="btn btn-primary form-control" id="refresh-api-table-btn"><span
                        class="glyphicon glyphicon-refresh"></span> Refresh</button>
            </div>
            
            <div class="table-responsive">
                <table id="api-table" class="table table-bordered table-striped table-hover">
                    <thead>
                        <tr>
                            <th>Public API</th>
                            <th>Path</th>
                            <th>Description</th>
                            <th>Cache</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
            
                    <tbody id="main-api-table"></tbody>
                    <tbody>
                        <tr id="api-template" class="hidden">
                            <td><b><a target="_blank" did="id" href=""></a></b></td>
                            <td><a target="_blank" did="path" href=""></a></td>
                            <td did="description"></td>
                            <td did="cache"></td>
                            <td did="actions"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!--API state-->
        </div>

    <!--BOTS TAB-->
    <div id="bots" class="tab-pane fade">
        <!--BOT state-->
        <h3>Bots</h3>
        <div class="form-group form-inline">
            <button class="btn btn-primary form-control" id="refresh-bot-table-btn"><span
                    class="glyphicon glyphicon-refresh"></span> Refresh</button>
        </div>
        
        <div class="table-responsive">
            <table id="bots-table" class="table table-bordered table-striped table-hover">
                <thead>
                    <tr>
                        <th>Bot Id</th>
                        <th class="hidden">Task</th>
                        <th>Task description</th>
                        <th>Last launch</th>
                        <th>System</th>
                        <th>Interval</th>
                        <th>Progress</th>
                        <th>Actions</th>
                    </tr>
                </thead>
        
                <tbody id="main-bot-table"></tbody>
                <tbody>
                    <tr id="bot-template" class="hidden">
                        <td did="id"></td>
                        <td did="task-name" class="hidden"></td>
                        <td did="task-description"></td>
                        <td did="last-launch"></td>
                        <td>
                            <span did="bot-system" class="glyphicon glyphicon-ok"></span>
                        </td>
                        <td did="interval"></td>
                        <td>
                            <div did="progress-bar" class="progress progress-bar progress-bar-info progress-bar-striped active"
                                role="progressbar" aria-valuemin="0" aria-valuemax="100"></div>
                        </td>
                        <td>
                            <button did="bot-start-btn" type="button" class="btn btn-primary hidden">
                                <span class="glyphicon glyphicon-play"></span>
                            </button>
                            <button did="bot-stop-btn" type="button" class="btn btn-primary hidden">
                                <span class="glyphicon glyphicon-pause"></span>
                            </button>
                            <button did="bot-schedule-btn" type="button" class="btn btn-primary" data-toggle="modal"
                                data-target="#bot-timeout-modal">
                                <span class="glyphicon glyphicon-time"></span>
                            </button>
        
                            <button did="bot-show-history-btn" type="button" class="btn btn-primary" data-toggle="modal"
                                data-target="#bot-history-modal">
                                <span class="glyphicon glyphicon-eye-open"></span>
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <!--BOT state-->
    </div>
    <!--API MODALS VIEWS-->
    <!--BOTS MODALS-->
    <div class="modal fade" id="bot-timeout-modal" role="dialog">
        <div class="modal-dialog modal-lg">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title" id="bot-timeout-header"></h4>
                    <p class="modal-title" id="timeout-bot-name"></p>
                </div>
                <div class="modal-body">
                    <div class="form-group form-inline">
                        <label for="bot-interval" class="control-label">Interval (in seconds): </label>
                        <input type="text" class="form-control" id="bot-interval"/>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default" id="enable-bot-btn"><span
                            class=""></span> Enable bot</button>
                    <button class="btn btn-default" id="update-bot-interval-btn"><span
                            class=""></span> Update interval</button>
                    <button class="btn btn-default" id="disable-bot-btn"><span
                            class=""></span> Disable bot</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                </div>
            </div>

        </div>
    </div>

    <div class="modal fade" id="bot-history-modal" role="dialog">
        <div class="modal-dialog modal-lg large-modal">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title" id="bot-history-header"></h4>
                    <p class="modal-title" id="history-bot-name"></p>
                </div>
                <div class="modal-body">
                    <h4 class="control-label">Bot API: <span id="bot-api"></span> </h4>
                    <div class="row">
                        <div class="col-md-2 form-group">
                            <button class="btn btn-primary form-control" id="refresh-bot-history-btn"><span class="glyphicon glyphicon-refresh"></span> Refresh</button>
                        </div>
                    </div>
                    <div class="table_wrapper">
                        <table id="bots-history-table" class="table table-bordered table-striped table-hover">
                            <thead>
                            <tr>
                                <th>Added operations</th>
                                <th>Time started</th>
                                <th>Time finished</th>
                                <th>Tasks</th>
                                <th>Progress</th>
                                <th>Finish status</th>
                                <th>Logs</th>
                            </tr>
                            </thead>

                            <tbody id="main-bot-history-table"></tbody>
                            <tbody>
                            <tr id="bot-history-template" class="hidden">
                                <td did="added-ops" class="table_layout_fixed_with">
                                    <button type="button" class="btn btn-primary" did="button-ops"></button>
                                </td>
                                <td did="time-start"></td>
                                <td did="time-finish"></td>
                                <td did="amount-tasks"></td>
                                <td class="table_layout_200">
                                    <div did="progress">
                                        <div did="progress-bar" class="progress progress-bar progress-bar-info progress-bar-striped active"
                                             role="progressbar" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                </td>
                                <td did="finish-status"></td>
                                <td did="logs">
                                    <button type="button" class="btn btn-primary" did="button-logs"></button>
                                </td>
                            </tr>
                            <tr id="bot-history-colspan-template" class="hidden">
                                <td did="logs" colspan="7">
                                    <pre did="logs-json" class="pre-scroll inherit pre_max_height_half_screen"></pre>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>

    <div class="modal fade" id="log-ops-modal" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title" id="log-ops-header"></h4>
                </div>
                <div class="modal-body">

                </div>
            </div>
        </div>
    </div>
    <!--BOTS MODALS-->

    <!--API MODALS VIEWS-->


    <!--SETTINGS TAB-->
    <div id="settings" class="tab-pane fade">
        <h3>Settings</h3>
        <div class="form-group form-inline">
        
            <button class="btn btn-primary form-control" id="refresh-settings-btn"><span
                    class="glyphicon glyphicon-refresh"></span> Refresh</button>
            <button class="btn btn-primary form-control" id="add-settings-btn" disabled data-toggle="modal" data-target="#settings-add-modal" ><span
                    class="glyphicon glyphicon-plus"></span> Add</button>
        </div>
        <div class="form-group">
            <ul class="nav nav-pills" id="settings-pills">
            </ul>
        </div>

		<!--MODAL EDIT-->
        <div class="modal fade" id="settings-edit-modal" role="dialog">
            <div class="modal-dialog modal-lg">

                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title" id="settings-edit-header"></h4>
                        <p class="modal-title" id="settings-name"></p>
                    </div>
                    <div class="modal-body">
                        <div class="container">
                            <h5 class="modal-title" id="settings-type-edit-header"></h5>
                            <p class="modal-title" id="settings-type" hidden="true"></p>
                        </div>
                        <hr>
                        <div class="container">
                            <div class="col-md-8">
                                <label for="edit-preference-value">Preference value:</label>
                                <textarea class="form-control" rows="1" id="edit-preference-value"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" id="save-new-value-for-settings-btn">Save</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <!--MODAL EDIT-->

        <!--MODAL ADD-->
        <div class="modal fade" id="settings-add-modal" role="dialog">
            <div class="modal-dialog modal-lg">

                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title" id="settings-add-header">Adding new preference</h4>
                        
                    </div>
                    <div class="modal-body">
                        <h4 class="modal-title" id="add-family">Family: <span id="family-name"></span> <span id="family-id" class="hidden"></span></h4>

                        <div class="container">
                            <div class="col-md-8">
                                <label for="add-preference-value">Preference value:</label>
                                <textarea class="form-control" rows="1" id="add-preference-value"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" id="add-new-settings-btn">Save</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <!--MODAL ADD-->

        <ul class="list-group form-group" id="settings-result-list">
        </ul>

        <ul class="list-group" hidden="true">
            <li class="panel panel-default" id="settings-list-item">
                <p class="panel-heading">
                    <a type="button" did="edit-settings" class="btn btn-default btn-xs pull-right" data-toggle="modal" data-target="#settings-edit-modal" >Edit</a>
                    <a type="button" did="remove-settings" class="btn btn-default btn-xs pull-right">Remove</a>
                    <b><span type="text" did="settings-name"></span></b>:
                    <span type="text" did="settings-description"></span> (source:
                    <b><span type="text" did="settings-source"></span></b>)
                </p>
                <div class="panel-body">
                    <p><b><span did="settings-value"></span></b></p>
                    <pre did="settings-value-json"></pre>
                </div>
                <div did="settings-restart" class="alert alert-warning no-margin no-border hidden" role="alert">This parameter will be accepted after server restarting!</div>
            </li>
        </ul>
    </div>
    <!--SETTINGS TAB-->

    <!--METRICS TAB-->
    <div id="metrics" class="tab-pane fade">
        <h3>Metrics</h3>
        
        <div class="form-inline form-group">
            <button class="btn btn-primary form-control" id="refresh-metrics-btn"><span
                    class="glyphicon glyphicon-refresh"></span> Refresh</button>
            <button class="btn btn-primary form-control" id="reset-metrics-btn" disabled><span
                    class="glyphicon glyphicon-ban-circle"></span> Reset</button>
        </div>
        <div class="form-group">
            <ul class="nav nav-pills" id="metrics-pills">
            </ul>
        </div>
        <div class="table-responsive">
            <table id="metrics-table" class="table table-bordered table-striped table-hover">
                <thead>
                    <tr>
                        <th>Id</th>
                        <th>Count</th>
                        <th>Total (s)</th>
                        <th>Average (ms)</th>
                        <th>Throughput / sec</th>
                    </tr>
                </thead>

                <tbody id="main-metrics-table"></tbody>
                <tbody>
                    <tr id="metrics-template" class="hidden">
                        <td did="id"></td>
                        <td did="count"></td>
                        <td did="total"></td>
                        <td did="average"></td>
                        <td did="throughput"></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <!--METRICS TAB-->

    <!--IPFS TAB-->
    <div id="ipfs" class="tab-pane fade">
        <h3>IPFS</h3>
        <div class="form-group form-inline">
            <button class="btn btn-primary form-control" id="refresh-ipfs-btn"><span class="glyphicon glyphicon-refresh"></span> Refresh</button>
        </div>
        <div class="form-group panel panel-info">
            <div class="panel-heading"><b>IPFS info</b></div>
            <div class="panel-body">
                <div class="form-group">
                    <p>IPFS status: &nbsp;&nbsp;<b><span id="ipfs-status"></span></b></p>
                    <p>Peer id: &nbsp;&nbsp;<b><span id="ipfs-peer-id"></span></b></p>
                    <p>Version: &nbsp;&nbsp;<b><span id="ipfs-version"></span></b></p>
                    <p>Gateway: &nbsp;&nbsp;<b><span id="ipfs-gateway"></span></b></p>
                    <p>API: &nbsp;&nbsp;<b><span id="ipfs-api"></span></b></p>
                    <p>Addresses: &nbsp;&nbsp;<b><span id="ipfs-addresses"></span></b></p>
                    <p>Public key: &nbsp;&nbsp;<b><span id="ipfs-public-key"></span></b></p>
                </div>
            </div>
        </div>

        <div class="form-group panel panel-info">
            <div class="panel-heading"><b>IPFS storage info</b></div>
            <div class="panel-body">
                <div class="form-group">
                    <p>Repo size: &nbsp;&nbsp;<b><span id="ipfs-repo-size"></span></b></p>
                    <p>Max storage: &nbsp;&nbsp;<b><span id="ipfs-max-storage-size"></span></b></p>
                    <p>Repo path: &nbsp;&nbsp;<b><span id="ipfs-repo-path"></span></b></p>
                </div>
            </div>
        </div>

        <div class="form-group panel panel-info">
            <div class="panel-heading"><b>IPFS system info</b></div>
            <div class="panel-body">
                <div class="form-group">
                    <p>Disk info: &nbsp;&nbsp;<b><span id="system-info"></span></b></p>
                    <p>Memory: &nbsp;&nbsp;<b><span id="system-memory"></span></b></p>
                    <p>Runtime: &nbsp;&nbsp;<b><span id="system-runtime"></span></b></p>
                    <p>Network: &nbsp;&nbsp;<b><span id="system-network"></span></b></p>
                </div>
            </div>
        </div>

        <div class="form-group panel panel-info">
            <div class="panel-heading"><b>Stats</b></div>
            <div class="panel-body">
                <div class="form-group">
                    <p>All ipfs objects: &nbsp;&nbsp;<b><span id="amount-all-ipfs-objects"></span></b></p>
                    <p>Pinned ipfs objects: &nbsp;&nbsp;<b><span id="amount-pinned-ipfs-objects"></span></b></p>
                    <p>Missing ipfs objects: &nbsp;&nbsp;<b><span id="amount-missing-ipfs-objects"></span></b></p>
                    <p>DB objects: &nbsp;&nbsp;<b><span id="amount-db-objects"></span></b></p>
                    <p>Inactive objects: &nbsp;&nbsp;<b><span id="amount-unactivated-objects"></span></b></p>
                </div>
                <div class="row">
                    <div class="col-md-2 form-group">
                        <input type="submit" value="Load full stats" id="load-full-stats-btn" class="btn btn-primary form-control">
                    </div>
                </div>
            </div>
        </div>

        <div class="form-group panel panel-info">
            <div class="panel-heading"><b>IPFS missing resources</b></div>
            <div class="panel-body">
                <div class="form-group">
                    <p>List of missing resources: &nbsp;&nbsp;<b><span id="ipfs-missing-objects"></span></b></p>
                </div>
                <div class="row">
                    <div class="col-md-3 form-group">
                        <input type="submit" value="Upload missing resources to IPFS" id="fix-ipfs-missing-images-btn" class="btn btn-primary form-control">
                    </div>
                </div>
            </div>
        </div>

        <div class="form-group panel panel-info">
            <div class="panel-heading"><b>Inactive resources</b></div>
            <div class="panel-body">
                <div class="form-group">
                    <p>List of inactive resources: &nbsp;&nbsp;<b><span id="blockchain-unactivated-images"></span></b></p>
                </div>
                <div class="row">
                    <div class="col-md-3 form-group">
                        <input type="submit" value="Remove inactive resources" id="fix-blc-missing-images-btn" class="btn btn-primary form-control">
                    </div>
                </div>
            </div>
        </div>

        <div class="form-group panel panel-info">
            <div class="panel-heading"><b>Add Resource</b></div>
            <div class="panel-body">
                <div class="row">
                    <div class="col-md-6 form-group">
                        <div class="input-group">
                            <span class="input-group-btn">
                                <span class="btn btn-default btn-file">
                                    Browse… <input type="file" id="image-file">
                                </span>
                            </span>
                            <input type="text" class="form-control" readonly>
                        </div>
                        <img id='img-upload'/>
                    </div>
                </div>
                <div class="form-group hidden" id="result-hash">
                    <p>Result: <b><span id="result-add-image"></span></b></p>
                </div>
                <div class="row">
                    <div class="col-md-2 form-group">
                        <input type="submit" value="Add File" id="add-file-btn" class="btn btn-primary form-control">
                    </div>
                </div>
            </div>
        </div>

        
        <div class="form-group panel panel-info">
            <div class="panel-heading"><b>Get file</b></div>
            <div class="panel-body">
                <div class="form-group form-inline">
                    <label for="get-image" class="control-label">Hash/cid of resource: </label>
                    <input type="text" id="get-image" class="form-control">
                </div>
                <div class="row">
                    <div class="col-md-4 form-group">
                        <a href="" id="image-link" download>
                            <input type="submit" value="Get by hash" id="get-image-btn" class="btn btn-primary form-control">
                            <input type="submit" value="Get by cid" id="get-image-cid-btn" class="btn btn-primary form-control">
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--IPFS TAB-->

    <!--REG TAB-->
    <div id="reg" class="tab-pane fade">
        <h3>Users</h3>
        <div class="form-group panel panel-info">
            <div class="panel-heading"><b>Signup</b></div>
            <div class="panel-body">
                <div class="form-group">
                    <div class="form-group form-horizontal">
                        <label for="signup-name" class="control-label">1. Nickname: </label>
                        <input type="text" id="signup-name" class="form-control" placeholder="Nickname"/>
                    </div>
                    <div class="row">
                        <div class="col-md-6 form-group">
                            <label for="signup-pwd" class="control-label">2a. Password: </label>
                            <input type="password" id="signup-pwd" class="form-control" placeholder="Password"/>
                        </div>
                        <div class="col-md-6 form-group">
                            <label for="signup-pwd-old" class="control-label">Old Password: </label>
                            <input type="password" id="signup-pwd-old" class="form-control" placeholder="Old password"/>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 form-group">
                            <label for="signup-user-prk" class="control-label">2b. Private key: </label>
                            <input type="password" id="signup-user-prk" class="form-control" placeholder="Private key"/>
                        </div>
                        <div class="col-md-6 form-group">
                            <label for="signup-user-pbk" class="control-label">Public key: </label>
                            <input type="password" id="signup-user-pbk" class="form-control" placeholder="Public key"/>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 form-group">
                            <label for="signup-user-prk-old" class="control-label">Old private key: </label>
                            <input type="password" id="signup-user-prk-old" class="form-control" placeholder="Old private key"/>
                        </div>
                        <div class="col-md-6 form-group">
                            <label for="signup-user-pbk-old" class="control-label">Old public key: </label>
                            <input type="password" id="signup-user-pbk-old" class="form-control" placeholder="Old public key"/>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 form-group">
                            <label for="signup-oauth-p" class="control-label">2c. OAuth provider: </label>
                            <input type="text" id="signup-oauth-p" class="form-control" placeholder="Oauth provider"/>
                        </div>
                        <div class="col-md-6 form-group">
                            <label for="signup-oauth-id" class="control-label">OAuth Id: </label>
                            <input type="text" id="signup-oauth-id" class="form-control" placeholder="Oauth Id"/>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 form-group">
                            <label for="signup-oauth-p-old" class="control-label">Old OAuth provider: </label>
                            <input type="text" id="signup-oauth-p-old" class="form-control" placeholder="Old OAuth provider"/>
                        </div>
                        <div class="col-md-6 form-group">
                            <label for="signup-oauth-id-old" class="control-label">Old OAuth Id: </label>
                            <input type="text" id="signup-oauth-id-old" class="form-control" placeholder="Old OAuth Id"/>
                        </div>
                    </div>
                    <div class="form-group form-horizontal">
                        <label for="signup-details" class="control-label">3. User details (raw json): </label>
                        <textarea rows="1" id="signup-details" class="form-control resize-vertical" placeholder="User details" ></textarea>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2 form-group">
                        <input type="submit" value="Signup" id="signup-btn" class="btn btn-primary form-control"/>
                    </div>
                </div>
            </div>
        </div>

        <div class="form-group panel panel-info">
            <div class="panel-heading"><b>Login</b></div>
            <div class="panel-body">
                <div class="form-group">
                    <div class="form-group form-horizontal">
                        <label for="login-name" class="control-label">1. Nickname + purpose (format 'nickname:site') : </label>
                        <input type="text" id="login-name" class="form-control" placeholder="Nickname"/>
                    </div>
                    <div class="row">
                        <div class="col-md-6 form-group">
                            <label for="login-pwd" class="control-label">2a. Signup Password: </label>
                            <input type="password" id="login-pwd" class="form-control" placeholder="Signup Password"/>
                        </div>
                        <div class="col-md-6 form-group">
                            <label for="login-signup-key" class="control-label">2b. Signup or login private key: </label>
                            <input type="password" id="login-signup-key" class="form-control" placeholder="Signup or login private key"/>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 form-group">
                            <label for="login-oauth-p" class="control-label">2c. Signup OAuth provider: </label>
                            <input type="text" id="login-oauth-p" class="form-control" placeholder="Signup OAuth provider"/>
                        </div>
                        <div class="col-md-6 form-group">
                            <label for="login-oauth-id" class="control-label">2d. Signup OAuth Id: </label>
                            <input type="text" id="login-oauth-id" class="form-control" placeholder="Signup OAuth Id"/>
                        </div>
                    </div>
                    <div class="form-group form-horizontal">
                        <label for="login-public-key" class="control-label">3. Public key (optional): </label>
                        <input type="text" id="login-public-key" class="form-control" placeholder="Public key"/>
                    </div>
                    <div class="form-group form-horizontal">
                        <label for="login-details" class="control-label">4. User details (raw json): </label>
                        <textarea rows="1" id="login-details" class="form-control resize-vertical" placeholder="User details"></textarea>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2 form-group">
                        <input type="submit" value="Login" id="login-btn" class="btn btn-primary form-control"/>
                    </div>
                </div>
            </div>
        </div>

        <div class="form-group panel panel-info">
            <div class="panel-heading"><b>Sign message</b></div>
            <div class="panel-body">
                <div class="form-group">
                    <div class="form-group form-horizontal">
                        <label for="sign-json" class="control-label">1. Json: </label>
                        <textarea rows="1" id="sign-json" class="form-control resize-vertical" placeholder="Json"></textarea>
                    </div>
                    <div class="form-group form-horizontal">
                        <label for="sign-name" class="control-label">2. Name (empty will be server): </label>
                        <input type="text" id="sign-name" class="form-control" placeholder="Name"/>
                    </div>
                    <div class="row">
                        <div class="col-md-6 form-group">
                            <label for="sign-pwd" class="control-label">3a. Password: </label>
                            <input type="text" id="sign-pwd" class="form-control" placeholder="Password"/>
                        </div>
                        <div class="col-md-6 form-group">
                            <label for="sign-pk" class="control-label">3b. Signup private key: </label>
                            <input type="text" id="sign-pk" class="form-control" placeholder="Signup private key"/>
                        </div>
                    </div>

                    <div class="form-group form-inline">
                        <label for="sign-by-server" class="control-label">4. Don't sign by server: </label>
                        <input type="checkbox" id="sign-by-server" class="form-control"/>
                    </div>
                </div>
                <div class="form-inline">
                    <input type="submit" value="Sign message" id="sign-btn" class="btn btn-primary form-control"/>
                    <input type="submit" value="Sign operation and add to queue" id="sign-add-btn" class="btn btn-primary form-control"/>
                </div>
            </div>
        </div>

    </div>
    <!--REG TAB-->
</div>
</body>
</html>